        .week-allocation-item.over-capacity {
            border-color: var(--error);
            background: var(--error-container);
        }
        
        .progress-fill.over {
            background: var(--error) !important;
        }                <div class="week-allocation-item over-capacity">
                    <div class="week-header">
                        <div class="week-info">
                            <span class="week-number">ç¬¬5é€±</span>
                            <span class="week-dates">8/8 - 8/14</span>
                        </div>
                        <div class="week-capacity">
                            <span class="capacity-label">ä½œæ¥­å¯èƒ½:</span>
                            <span class="capacity-value">14.4h</span>
                        </div>
                    </div>
                    <div class="week-tasks">
                        <div class="allocated-task">
                            <span class="task-category">å®Ÿè£…</span>
                            <span class="task-name">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™º</span>
                            <span class="task-hours">20h</span>
                        </div>
                    </div>
                    <div class="week-progress">
                        <div class="progress-bar">
                            <div class="progress-fill over" style="width: 100%; background: var(--error);"></div>
                        </div>
                        <span class="progress-text" style="color: var(--error);">20h / 14.4h âš ï¸</span>
                    </div>
                </div>        /* ã‚¢ãƒ©ãƒ¼ãƒˆ */
        .allocation-alert {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .alert-warning {
            background: var(--error-container);
            border: 1px solid var(--error);
        }
        
        .alert-icon {
            font-size: 20px;
            line-height: 1;
        }
        
        .alert-content {
            flex: 1;
        }
        
        .alert-title {
            font-weight: 600;
            color: var(--on-error-container);
            margin-bottom: 4px;
        }
        
        .alert-message {
            font-size: 14px;
            color: var(--on-error-container);
        }
        
        .alert-message span {
            font-weight: 600;
        }        .recalc-button {
            margin-left: auto;
            padding: 6px 12px;
            background: var(--surface-container-high);
            border: 1px solid var(--outline);
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .recalc-button:hover {
            background: var(--surface-container-highest);
        }
        
        .section-description {
            font-size: 14px;
            color: var(--on-surface-variant);
            background: var(--surface-container);
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            line-height: 1.6;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .section-description strong {
            color: var(--primary);
            font-weight: 600;
        }
        <!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WBSä½œæˆ - moderation-craft</title>
    <style>
        :root {
            /* Material Theme Colors - Light Mode */
            --primary: #5E621B;
            --on-primary: #FFFFFF;
            --primary-container: #E3E892;
            --on-primary-container: #464A02;
            
            --secondary: #5F6044;
            --on-secondary: #FFFFFF;
            --secondary-container: #E4E5C0;
            --on-secondary-container: #47492E;
            
            --tertiary: #3C6659;
            --on-tertiary: #FFFFFF;
            --tertiary-container: #BEECDB;
            --on-tertiary-container: #244E42;
            
            --error: #BA1A1A;
            --on-error: #FFFFFF;
            --error-container: #FFDAD6;
            --on-error-container: #93000A;
            
            --background: #FCFAEC;
            --on-background: #1C1C14;
            --surface: #FCFAEC;
            --on-surface: #1C1C14;
            --surface-variant: #E5E3D2;
            --on-surface-variant: #47473B;
            
            --outline: #787869;
            --outline-variant: #C9C7B6;
            
            --surface-container-lowest: #FFFFFF;
            --surface-container-low: #F6F4E7;
            --surface-container: #F1EEE1;
            --surface-container-high: #EBE8DB;
            --surface-container-highest: #E5E3D6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--background);
            color: var(--on-background);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* åŸºæœ¬æƒ…å ± */
        .basic-info-grid {
            display: grid;
            gap: 20px;
        }
        
        .date-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .form-label {
            display: block;
            font-weight: 500;
            color: var(--on-surface);
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .required {
            color: var(--error);
            margin-left: 4px;
        }
        
        input[type="text"],
        input[type="date"],
        textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--outline-variant);
            border-radius: 8px;
            font-size: 15px;
            background: var(--surface-container-lowest);
            color: var(--on-surface);
            transition: all 0.2s;
            font-family: inherit;
        }
        
        input:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--surface);
        }
        
        textarea {
            resize: vertical;
            min-height: 60px;
        }
        
        .project-duration {
            padding: 12px 16px;
            background: var(--primary-container);
            color: var(--on-primary-container);
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            text-align: center;
        }
        
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header {
            background: var(--surface-container-low);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 24px;
            border: 1px solid var(--outline-variant);
        }
        
        .breadcrumb {
            color: var(--on-surface-variant);
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }
        
        h1 {
            color: var(--on-surface);
            font-size: 24px;
            font-weight: 600;
        }
        
        /* ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ± */
        .project-info {
            background: var(--primary-container);
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .section {
            background: var(--surface-container-low);
            padding: 24px;
            border-radius: 12px;
            border: 1px solid var(--outline-variant);
            margin-bottom: 24px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--on-surface);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .section-number {
            background: var(--primary);
            color: var(--on-primary);
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        
        /* æŠ•ä¸‹å¯èƒ½æ™‚é–“ã®è¨ˆç®— */
        .time-calc-container {
            display: grid;
            gap: 20px;
        }
        
        .time-input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .form-group {
            position: relative;
        }
        
        .form-group.weekday {
            --form-accent: var(--primary);
            --form-accent-container: var(--primary-container);
            --form-on-accent-container: var(--on-primary-container);
        }
        
        .form-group.weekend {
            --form-accent: var(--tertiary);
            --form-accent-container: var(--tertiary-container);
            --form-on-accent-container: var(--on-tertiary-container);
        }
        
        .form-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            color: var(--on-surface);
            font-size: 13px;
            margin-bottom: 8px;
        }
        
        .form-label-icon {
            width: 20px;
            height: 20px;
            background: var(--form-accent-container, var(--surface-variant));
            color: var(--form-on-accent-container, var(--on-surface-variant));
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
        }
        
        .input-wrapper {
            position: relative;
        }
        
        input[type="number"], select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--outline-variant);
            border-radius: 8px;
            font-size: 15px;
            background: var(--surface-container-lowest);
            color: var(--on-surface);
            transition: all 0.2s;
            appearance: none;
        }
        
        .form-group.weekday input:focus,
        .form-group.weekday select:focus {
            border-color: var(--primary);
        }
        
        .form-group.weekend input:focus,
        .form-group.weekend select:focus {
            border-color: var(--tertiary);
        }
        
        input[type="number"]:hover, select:hover {
            border-color: var(--outline);
        }
        
        input:focus, select:focus {
            outline: none;
            background: var(--surface);
        }
        
        .input-suffix {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--on-surface-variant);
            font-size: 14px;
            pointer-events: none;
        }
        
        .buffer-group {
            grid-column: 1 / -1;
        }
        
        .buffer-input-wrapper {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .buffer-input-wrapper input {
            width: 120px;
        }
        
        .help-text {
            font-size: 12px;
            color: var(--on-surface-variant);
            line-height: 1.5;
            margin-top: 8px;
        }
        
        .result-card {
            background: var(--secondary-container);
            padding: 16px 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
        }
        
        .result-left {
            text-align: left;
        }
        
        .result-label {
            font-size: 13px;
            color: var(--on-secondary-container);
            margin-bottom: 4px;
        }
        
        .result-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--secondary);
            display: flex;
            align-items: baseline;
            gap: 6px;
        }
        
        .result-unit {
            font-size: 16px;
            font-weight: 400;
        }
        
        .result-formula {
            font-size: 12px;
            color: var(--on-surface-variant);
            opacity: 0.8;
            text-align: right;
        }
        
        /* ã‚¿ã‚¹ã‚¯ãƒ†ãƒ¼ãƒ–ãƒ« */
        .task-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 16px;
        }
        
        .task-table th,
        .task-table td {
            padding: 12px;
            text-align: left;
            border: 1px solid var(--outline-variant);
        }
        
        .task-table th {
            background: var(--surface-container);
            font-weight: 600;
            color: var(--on-surface);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .task-table tr {
            background: var(--surface-container-lowest);
        }
        
        .task-table tr:hover {
            background: var(--surface-container);
        }
        
        .drag-handle {
            cursor: grab;
            color: var(--on-surface-variant);
            font-size: 20px;
            width: 30px;
            text-align: center;
        }
        
        .drag-handle:active {
            cursor: grabbing;
        }
        
        .category-select {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--outline);
            border-radius: 4px;
            background: var(--surface-container-lowest);
        }
        
        .task-input {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--outline);
            border-radius: 4px;
            background: var(--surface-container-lowest);
        }
        
        .hours-input {
            width: 80px;
            padding: 8px;
            border: 1px solid var(--outline);
            border-radius: 4px;
            text-align: center;
            background: var(--surface-container-lowest);
        }
        
        .add-row-btn {
            padding: 8px 16px;
            background: var(--primary);
            color: var(--on-primary);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .add-row-btn:hover {
            opacity: 0.9;
        }
        
        .delete-btn {
            background: transparent;
            border: none;
            color: var(--error);
            cursor: pointer;
            font-size: 20px;
            padding: 4px 8px;
        }
        
        .delete-btn:hover {
            background: var(--error-container);
            border-radius: 4px;
        }
        
        /* ã‚«ãƒ†ã‚´ãƒªåˆ¥é›†è¨ˆ */
        .category-summary-container {
            margin-top: 24px;
            background: var(--surface-container);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--outline-variant);
        }
        
        .category-summary-header {
            margin-bottom: 16px;
        }
        
        .category-summary-header h4 {
            font-size: 14px;
            font-weight: 600;
            color: var(--on-surface);
        }
        
        .category-bars {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .category-bar-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .category-bar-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
        }
        
        .category-name {
            color: var(--on-surface-variant);
        }
        
        .category-hours {
            font-weight: 600;
            color: var(--on-surface);
        }
        
        .category-bar-track {
            height: 8px;
            background: var(--surface-variant);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .category-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .total-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid var(--outline-variant);
            font-size: 15px;
            font-weight: 600;
        }
        
        .total-hours {
            font-size: 18px;
            color: var(--primary);
        }
        
        /* é€±åˆ¥ã‚¿ã‚¹ã‚¯é…åˆ† */
        .week-allocation-container {
            display: grid;
            gap: 16px;
        }
        
        .week-allocation-item {
            background: var(--surface-container);
            border: 1px solid var(--outline-variant);
            border-radius: 8px;
            padding: 16px;
        }
        
        .week-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .week-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .week-number {
            font-weight: 600;
            color: var(--on-surface);
        }
        
        .week-dates {
            font-size: 13px;
            color: var(--on-surface-variant);
        }
        
        .week-capacity {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }
        
        .capacity-label {
            color: var(--on-surface-variant);
        }
        
        .capacity-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        .week-tasks {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
        }
        
        .allocated-task {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--surface-container-lowest);
            border-radius: 6px;
            font-size: 14px;
        }
        
        .task-category {
            padding: 2px 8px;
            background: var(--primary-container);
            color: var(--on-primary-container);
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .task-name {
            flex: 1;
            color: var(--on-surface);
        }
        
        .task-hours {
            font-weight: 600;
            color: var(--on-surface);
        }
        
        .week-progress {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .progress-bar {
            flex: 1;
            height: 8px;
            background: var(--surface-variant);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            font-size: 12px;
            color: var(--on-surface-variant);
            min-width: 70px;
            text-align: right;
        }
        
        /* ãƒœã‚¿ãƒ³ã‚°ãƒ«ãƒ¼ãƒ— */
        .button-group {
            display: flex;
            gap: 12px;
            justify-content: space-between;
            margin-top: 32px;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: var(--on-primary);
        }
        
        .btn-primary:hover {
            opacity: 0.9;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .btn-secondary {
            background: var(--surface-container-high);
            color: var(--on-surface);
            border: 1px solid var(--outline);
        }
        
        @media (max-width: 768px) {
            .time-calc-grid {
                grid-template-columns: 1fr;
            }
            
            .task-table {
                font-size: 14px;
            }
            
            .category-summary {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="header">
            <div class="breadcrumb">
                <a href="/projects">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§</a> / æ–°è¦ä½œæˆ
            </div>
            <h1>æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ</h1>
        </div>

        <!-- åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h3 class="section-title">
                <span class="section-number">1</span>
                ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºæœ¬æƒ…å ±
            </h3>
            
            <div class="basic-info-grid">
                <div class="form-group">
                    <label class="form-label">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå <span class="required">*</span></label>
                    <input type="text" id="project-name" placeholder="ä¾‹: ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µã‚¤ãƒˆåˆ¶ä½œ" value="ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µã‚¤ãƒˆåˆ¶ä½œ" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">å®šé‡ç›®æ¨™ <span class="required">*</span></label>
                    <textarea id="project-goal" placeholder="ä¾‹: è¨ªå•è€…æ•°æœˆé–“1000äººã‚’é”æˆã™ã‚‹ã€5ã¤ã®ä½œå“ã‚’æ²è¼‰ã™ã‚‹" rows="2" required>è¨ªå•è€…æ•°æœˆé–“1000äººã‚’é”æˆã™ã‚‹ã€5ã¤ã®ä½œå“ã‚’æ²è¼‰ã™ã‚‹</textarea>
                </div>
                
                <div class="date-inputs">
                    <div class="form-group">
                        <label class="form-label">é–‹å§‹æ—¥ <span class="required">*</span></label>
                        <input type="date" id="start-date" value="2025-07-11" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">æœŸé™ <span class="required">*</span></label>
                        <input type="date" id="deadline" value="2025-08-31" required>
                    </div>
                </div>
                
                <div class="project-duration">
                    æœŸé–“: <span id="duration">7é€±é–“</span>
                </div>
            </div>
        </div>

        <!-- 1. æŠ•ä¸‹å¯èƒ½æ™‚é–“ã®è¨ˆç®— -->
        <div class="section">
            <h3 class="section-title">
                <span class="section-number">2</span>
                æŠ•ä¸‹å¯èƒ½æ™‚é–“ã®è¨ˆç®—
            </h3>
            
            <div class="time-calc-container">
                <div class="time-input-grid">
                    <div class="form-group weekday">
                        <label class="form-label">
                            <span class="form-label-icon">å¹³</span>
                            å¹³æ—¥ã®ä½œæ¥­å¯èƒ½æ—¥æ•°
                        </label>
                        <div class="input-wrapper">
                            <select id="weekday-days">
                                <option value="0">0æ—¥</option>
                                <option value="1">1æ—¥</option>
                                <option value="2">2æ—¥</option>
                                <option value="3">3æ—¥</option>
                                <option value="4">4æ—¥</option>
                                <option value="5" selected>5æ—¥</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group weekend">
                        <label class="form-label">
                            <span class="form-label-icon">ä¼‘</span>
                            ä¼‘æ—¥ã®ä½œæ¥­å¯èƒ½æ—¥æ•°
                        </label>
                        <div class="input-wrapper">
                            <select id="weekend-days">
                                <option value="0">0æ—¥</option>
                                <option value="1">1æ—¥</option>
                                <option value="2" selected>2æ—¥</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group weekday">
                        <label class="form-label">
                            <span class="form-label-icon">â°</span>
                            å¹³æ—¥ã®ä½œæ¥­å¯èƒ½æ™‚é–“
                        </label>
                        <div class="input-wrapper">
                            <input type="number" id="weekday-hours" value="2" min="0" max="24" step="0.5">
                            <span class="input-suffix">æ™‚é–“/æ—¥</span>
                        </div>
                    </div>
                    
                    <div class="form-group weekend">
                        <label class="form-label">
                            <span class="form-label-icon">â°</span>
                            ä¼‘æ—¥ã®ä½œæ¥­å¯èƒ½æ™‚é–“
                        </label>
                        <div class="input-wrapper">
                            <input type="number" id="weekend-hours" value="4" min="0" max="24" step="0.5">
                            <span class="input-suffix">æ™‚é–“/æ—¥</span>
                        </div>
                    </div>
                    
                    <div class="form-group buffer-group">
                        <label class="form-label">
                            <span class="form-label-icon">%</span>
                            ãƒãƒƒãƒ•ã‚¡ç‡
                        </label>
                        <div class="buffer-input-wrapper">
                            <input type="number" id="buffer-rate" value="80" min="50" max="100" step="5">
                            <span>%</span>
                        </div>
                        <p class="help-text">
                            äºˆæœŸã›ã¬ã‚¿ã‚¹ã‚¯ã‚„ä¼‘æ†©æ™‚é–“ã‚’è€ƒæ…®ã—ã€å®Ÿéš›ã®ä½œæ¥­å¯èƒ½æ™‚é–“ã‹ã‚‰ä½•%ã‚’è¦‹ç©ã‚‚ã‚Šã«ä½¿ã†ã‹ã®å‰²åˆã§ã™ã€‚
                            80-90%ç¨‹åº¦ãŒãŠã™ã™ã‚ã§ã™ã€‚
                        </p>
                    </div>
                </div>
                
                <div class="result-card">
                    <div class="result-left">
                        <div class="result-label">1é€±é–“ã®ä½œæ¥­å¯èƒ½æ™‚é–“</div>
                        <div class="result-value">
                            <span id="weekly-hours">14.4</span>
                            <span class="result-unit">æ™‚é–“</span>
                        </div>
                    </div>
                    <div class="result-formula">
                        (5æ—¥ Ã— 2h + 2æ—¥ Ã— 4h) Ã— 80% = 14.4h
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. ã‚¿ã‚¹ã‚¯ä¸€è¦§ -->
        <div class="section">
            <h3 class="section-title">
                <span class="section-number">3</span>
                ã‚¿ã‚¹ã‚¯ä¸€è¦§
            </h3>
            
            <p class="section-description">
                ã“ã“ã§ã¯<strong>é€±å˜ä½ã®å¤§ããªã‚¿ã‚¹ã‚¯</strong>ã‚’å…¥åŠ›ã—ã¾ã™ã€‚æ—¥ã€…ã®ç´°ã‹ã„ã‚¿ã‚¹ã‚¯ã¯ã€å„é€±ã®å§‹ã‚ã«è©³ç´°åŒ–ã—ã¦ã„ãã¾ã™ã€‚
            </p>
            
            <table class="task-table">
                <thead>
                    <tr>
                        <th style="width: 40px;"></th>
                        <th style="width: 150px;">ã‚«ãƒ†ã‚´ãƒª</th>
                        <th>ã‚¿ã‚¹ã‚¯å</th>
                        <th style="width: 100px;">è¦‹ç©æ™‚é–“</th>
                        <th style="width: 40px;"></th>
                    </tr>
                </thead>
                <tbody id="task-tbody">
                    <tr>
                        <td class="drag-handle">â‹®â‹®</td>
                        <td>
                            <select class="category-select">
                                <option>ä¼ç”»ãƒ»è¨­è¨ˆ</option>
                                <option>ãƒ‡ã‚¶ã‚¤ãƒ³</option>
                                <option>å®Ÿè£…</option>
                                <option>ãƒ†ã‚¹ãƒˆ</option>
                                <option>ãƒ‡ãƒ—ãƒ­ã‚¤</option>
                            </select>
                        </td>
                        <td><input type="text" class="task-input" value="è¦ä»¶å®šç¾©" placeholder="ã‚¿ã‚¹ã‚¯åã‚’å…¥åŠ›"></td>
                        <td><input type="number" class="hours-input" value="8" min="0.5" step="0.5"></td>
                        <td><button class="delete-btn" title="å‰Šé™¤">Ã—</button></td>
                    </tr>
                    <tr>
                        <td class="drag-handle">â‹®â‹®</td>
                        <td>
                            <select class="category-select">
                                <option>ä¼ç”»ãƒ»è¨­è¨ˆ</option>
                                <option>ãƒ‡ã‚¶ã‚¤ãƒ³</option>
                                <option>å®Ÿè£…</option>
                                <option>ãƒ†ã‚¹ãƒˆ</option>
                                <option>ãƒ‡ãƒ—ãƒ­ã‚¤</option>
                            </select>
                        </td>
                        <td><input type="text" class="task-input" value="ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ä½œæˆ" placeholder="ã‚¿ã‚¹ã‚¯åã‚’å…¥åŠ›"></td>
                        <td><input type="number" class="hours-input" value="12" min="0.5" step="0.5"></td>
                        <td><button class="delete-btn" title="å‰Šé™¤">Ã—</button></td>
                    </tr>
                    <tr>
                        <td class="drag-handle">â‹®â‹®</td>
                        <td>
                            <select class="category-select">
                                <option>ä¼ç”»ãƒ»è¨­è¨ˆ</option>
                                <option selected>ãƒ‡ã‚¶ã‚¤ãƒ³</option>
                                <option>å®Ÿè£…</option>
                                <option>ãƒ†ã‚¹ãƒˆ</option>
                                <option>ãƒ‡ãƒ—ãƒ­ã‚¤</option>
                            </select>
                        </td>
                        <td><input type="text" class="task-input" value="UIãƒ‡ã‚¶ã‚¤ãƒ³ä½œæˆ" placeholder="ã‚¿ã‚¹ã‚¯åã‚’å…¥åŠ›"></td>
                        <td><input type="number" class="hours-input" value="20" min="0.5" step="0.5"></td>
                        <td><button class="delete-btn" title="å‰Šé™¤">Ã—</button></td>
                    </tr>
                </tbody>
            </table>
            
            <button class="add-row-btn">
                <span>+</span> ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ 
            </button>
            
            <!-- ã‚«ãƒ†ã‚´ãƒªåˆ¥é›†è¨ˆ -->
            <div class="category-summary-container">
                <div class="category-summary-header">
                    <h4>ã‚«ãƒ†ã‚´ãƒªåˆ¥æ™‚é–“é…åˆ†</h4>
                </div>
                <div class="category-bars">
                    <div class="category-bar-item">
                        <div class="category-bar-label">
                            <span class="category-name">ä¼ç”»ãƒ»è¨­è¨ˆ</span>
                            <span class="category-hours">20h</span>
                        </div>
                        <div class="category-bar-track">
                            <div class="category-bar-fill" style="width: 50%; background: var(--primary);"></div>
                        </div>
                    </div>
                    <div class="category-bar-item">
                        <div class="category-bar-label">
                            <span class="category-name">ãƒ‡ã‚¶ã‚¤ãƒ³</span>
                            <span class="category-hours">20h</span>
                        </div>
                        <div class="category-bar-track">
                            <div class="category-bar-fill" style="width: 50%; background: var(--tertiary);"></div>
                        </div>
                    </div>
                </div>
                <div class="total-summary">
                    <span>åˆè¨ˆæ™‚é–“</span>
                    <span class="total-hours">40æ™‚é–“</span>
                </div>
            </div>
        </div>

        <!-- 3. é€±åˆ¥ã‚¿ã‚¹ã‚¯é…åˆ† -->
        <div class="section">
            <h3 class="section-title">
                <span class="section-number">4</span>
                é€±åˆ¥ã‚¿ã‚¹ã‚¯é…åˆ†
            </h3>
            
            <p class="section-description">
                ã‚¿ã‚¹ã‚¯ã‚’é€±ã”ã¨ã«è‡ªå‹•é…åˆ†ã—ã¾ã—ãŸã€‚ã‚¿ã‚¹ã‚¯ã‚’å¤‰æ›´ã™ã‚‹ã¨è‡ªå‹•çš„ã«å†è¨ˆç®—ã•ã‚Œã¾ã™ã€‚
                <button class="recalc-button" onclick="alert('é…åˆ†ã‚’å†è¨ˆç®—ã—ã¾ã—ãŸ')">
                    ğŸ”„ æ‰‹å‹•ã§å†è¨ˆç®—
                </button>
            </p>
            
            <!-- ã‚ªãƒ¼ãƒãƒ¼ã‚¢ãƒ©ãƒ¼ãƒˆ -->
            <div class="allocation-alert alert-warning" style="display: none;">
                <div class="alert-icon">âš ï¸</div>
                <div class="alert-content">
                    <div class="alert-title">ã‚¿ã‚¹ã‚¯ã®ç·æ™‚é–“ãŒä½œæ¥­å¯èƒ½æ™‚é–“ã‚’è¶…ãˆã¦ã„ã¾ã™</div>
                    <div class="alert-message">
                        ã‚¿ã‚¹ã‚¯åˆè¨ˆ: <span class="total-task-hours">40</span>æ™‚é–“ / 
                        ä½œæ¥­å¯èƒ½æ™‚é–“åˆè¨ˆ: <span class="total-available-hours">100.8</span>æ™‚é–“
                    </div>
                </div>
            </div>
            
            <div class="week-allocation-container">
                <div class="week-allocation-item">
                    <div class="week-header">
                        <div class="week-info">
                            <span class="week-number">ç¬¬1é€±</span>
                            <span class="week-dates">7/11 - 7/17</span>
                        </div>
                        <div class="week-capacity">
                            <span class="capacity-label">ä½œæ¥­å¯èƒ½:</span>
                            <span class="capacity-value">14.4h</span>
                        </div>
                    </div>
                    <div class="week-tasks">
                        <div class="allocated-task">
                            <span class="task-category">ä¼ç”»ãƒ»è¨­è¨ˆ</span>
                            <span class="task-name">è¦ä»¶å®šç¾©</span>
                            <span class="task-hours">8h</span>
                        </div>
                    </div>
                    <div class="week-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 55.6%;"></div>
                        </div>
                        <span class="progress-text">8h / 14.4h</span>
                    </div>
                </div>

                <div class="week-allocation-item">
                    <div class="week-header">
                        <div class="week-info">
                            <span class="week-number">ç¬¬2é€±</span>
                            <span class="week-dates">7/18 - 7/24</span>
                        </div>
                        <div class="week-capacity">
                            <span class="capacity-label">ä½œæ¥­å¯èƒ½:</span>
                            <span class="capacity-value">14.4h</span>
                        </div>
                    </div>
                    <div class="week-tasks">
                        <div class="allocated-task">
                            <span class="task-category">ä¼ç”»ãƒ»è¨­è¨ˆ</span>
                            <span class="task-name">ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ä½œæˆ</span>
                            <span class="task-hours">12h</span>
                        </div>
                    </div>
                    <div class="week-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 83.3%;"></div>
                        </div>
                        <span class="progress-text">12h / 14.4h</span>
                    </div>
                </div>

                <div class="week-allocation-item">
                    <div class="week-header">
                        <div class="week-info">
                            <span class="week-number">ç¬¬3é€±</span>
                            <span class="week-dates">7/25 - 7/31</span>
                        </div>
                        <div class="week-capacity">
                            <span class="capacity-label">ä½œæ¥­å¯èƒ½:</span>
                            <span class="capacity-value">14.4h</span>
                        </div>
                    </div>
                    <div class="week-tasks">
                        <div class="allocated-task">
                            <span class="task-category">ãƒ‡ã‚¶ã‚¤ãƒ³</span>
                            <span class="task-name">UIãƒ‡ã‚¶ã‚¤ãƒ³ä½œæˆ</span>
                            <span class="task-hours">14.4h</span>
                        </div>
                    </div>
                    <div class="week-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 100%; background: var(--tertiary);"></div>
                        </div>
                        <span class="progress-text">14.4h / 14.4h</span>
                    </div>
                </div>

                <div class="week-allocation-item">
                    <div class="week-header">
                        <div class="week-info">
                            <span class="week-number">ç¬¬4é€±</span>
                            <span class="week-dates">8/1 - 8/7</span>
                        </div>
                        <div class="week-capacity">
                            <span class="capacity-label">ä½œæ¥­å¯èƒ½:</span>
                            <span class="capacity-value">14.4h</span>
                        </div>
                    </div>
                    <div class="week-tasks">
                        <div class="allocated-task">
                            <span class="task-category">ãƒ‡ã‚¶ã‚¤ãƒ³</span>
                            <span class="task-name">UIãƒ‡ã‚¶ã‚¤ãƒ³ä½œæˆï¼ˆç¶šãï¼‰</span>
                            <span class="task-hours">5.6h</span>
                        </div>
                    </div>
                    <div class="week-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 38.9%;"></div>
                        </div>
                        <span class="progress-text">5.6h / 14.4h</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ãƒœã‚¿ãƒ³ -->
        <div class="button-group">
            <a href="/projects" class="btn btn-secondary">
                ã‚­ãƒ£ãƒ³ã‚»ãƒ«
            </a>
            <button type="submit" class="btn btn-primary">
                ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
            </button>
        </div>
    </div>

    <script>
        // æœŸé–“è¨ˆç®—
        function calculateDuration() {
            const startDate = document.getElementById('start-date').value;
            const deadline = document.getElementById('deadline').value;
            
            if (startDate && deadline) {
                const start = new Date(startDate);
                const end = new Date(deadline);
                const diffTime = Math.abs(end - start);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                const diffWeeks = Math.ceil(diffDays / 7);
                
                document.getElementById('duration').textContent = `${diffWeeks}é€±é–“`;
            }
        }
        
        document.getElementById('start-date').addEventListener('change', calculateDuration);
        document.getElementById('deadline').addEventListener('change', calculateDuration);
        
        // ä½œæ¥­å¯èƒ½æ™‚é–“ã®è¨ˆç®—
        function calculateWeeklyHours() {
            const weekdayDays = parseInt(document.getElementById('weekday-days').value);
            const weekendDays = parseInt(document.getElementById('weekend-days').value);
            const weekdayHours = parseFloat(document.getElementById('weekday-hours').value);
            const weekendHours = parseFloat(document.getElementById('weekend-hours').value);
            const bufferRate = parseInt(document.getElementById('buffer-rate').value) / 100;
            
            const totalHours = (weekdayDays * weekdayHours + weekendDays * weekendHours) * bufferRate;
            document.getElementById('weekly-hours').textContent = totalHours.toFixed(1);
            
            // è¨ˆç®—å¼ã‚‚æ›´æ–°
            const formula = `(${weekdayDays}æ—¥ Ã— ${weekdayHours}h + ${weekendDays}æ—¥ Ã— ${weekendHours}h) Ã— ${Math.round(bufferRate * 100)}% = ${totalHours.toFixed(1)}h`;
            document.querySelector('.result-formula').textContent = formula;
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.getElementById('weekday-days').addEventListener('change', calculateWeeklyHours);
        document.getElementById('weekend-days').addEventListener('change', calculateWeeklyHours);
        document.getElementById('weekday-hours').addEventListener('input', calculateWeeklyHours);
        document.getElementById('weekend-hours').addEventListener('input', calculateWeeklyHours);
        document.getElementById('buffer-rate').addEventListener('input', calculateWeeklyHours);

        // ã‚¿ã‚¹ã‚¯è¿½åŠ ãƒœã‚¿ãƒ³
        document.querySelector('.add-row-btn').addEventListener('click', function() {
            const tbody = document.getElementById('task-tbody');
            const newRow = tbody.rows[0].cloneNode(true);
            newRow.querySelectorAll('input').forEach(input => input.value = '');
            tbody.appendChild(newRow);
        });

        // å‰Šé™¤ãƒœã‚¿ãƒ³ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆå§”è­²ï¼‰
        document.getElementById('task-tbody').addEventListener('click', function(e) {
            if (e.target.classList.contains('delete-btn')) {
                if (this.rows.length > 1) {
                    e.target.closest('tr').remove();
                }
            }
        });
    </script>
</body>
</html>