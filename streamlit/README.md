# ModerationCraft Analytics Dashboard

Phase 3å®Ÿè£… - Streamlitã«ã‚ˆã‚‹åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# 1. analyticsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd analytics

# 2. èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
./run.sh

# ã¾ãŸã¯æ‰‹å‹•ã§èµ·å‹•
pip install -r requirements.txt
streamlit run app.py
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:8501 ã«ã‚¢ã‚¯ã‚»ã‚¹

## ğŸ“Š æ©Ÿèƒ½

### 1. ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- KPIã‚«ãƒ¼ãƒ‰ï¼ˆç”Ÿç”£æ€§ã€å¥åº·ã€ä½œæ¥­æ™‚é–“ï¼‰
- ãƒˆãƒ¬ãƒ³ãƒ‰ã‚°ãƒ©ãƒ•
- ç›¸é–¢åˆ†æ
- é€±é–“ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—

### 2. ç”Ÿç”£æ€§åˆ†æãƒšãƒ¼ã‚¸
- æ™‚ç³»åˆ—åˆ†æï¼ˆæ—¥æ¬¡/é€±æ¬¡/æœˆæ¬¡ï¼‰
- æ™‚é–“å¸¯åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯åˆ†æ
- ã‚¤ãƒ³ã‚µã‚¤ãƒˆç”Ÿæˆ

### 3. å¥åº·ç›¸é–¢ãƒšãƒ¼ã‚¸
- ç›¸é–¢ä¿‚æ•°ãƒãƒˆãƒªãƒƒã‚¯ã‚¹
- æ•£å¸ƒå›³åˆ†æ
- æ™‚ç³»åˆ—ç›¸é–¢ãƒˆãƒ¬ãƒ³ãƒ‰
- æœ€é©å€¤åˆ†æ
- æ”¹å–„ææ¡ˆ

### 4. ãƒ‡ãƒ¼ã‚¿æ¢ç´¢ãƒšãƒ¼ã‚¸
- SQLã‚¨ãƒ‡ã‚£ã‚¿
- ãƒ†ãƒ¼ãƒ–ãƒ«æ¢ç´¢
- ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±è¡¨ç¤º
- ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
analytics/
â”œâ”€â”€ app.py                  # ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”œâ”€â”€ pages/                  # ãƒãƒ«ãƒãƒšãƒ¼ã‚¸ã‚¢ãƒ—ãƒª
â”‚   â”œâ”€â”€ 1_ğŸ“Š_Productivity.py
â”‚   â”œâ”€â”€ 2_ğŸ’¤_Health.py
â”‚   â””â”€â”€ 3_ğŸ”_Explorer.py
â”œâ”€â”€ utils/                  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ database.py        # DBæ¥ç¶š
â”‚   â””â”€â”€ mock_data.py       # ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
â”œâ”€â”€ .streamlit/
â”‚   â””â”€â”€ config.toml        # UIè¨­å®š
â”œâ”€â”€ requirements.txt       # ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â””â”€â”€ run.sh                # èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

## ğŸ”§ è¨­å®š

### ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹

1. **dbtã®DuckDBãƒ•ã‚¡ã‚¤ãƒ«**ï¼ˆæ¨å¥¨ï¼‰
   ```bash
   # dbtã‚’å®Ÿè¡Œã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™
   cd ../dbt-moderation-craft/moderation_craft
   dbt run --profiles-dir="../"
   ```

2. **ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿**ï¼ˆãƒ‡ãƒ¢ç”¨ï¼‰
   - DBãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„å ´åˆã¯è‡ªå‹•çš„ã«ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
   - 90æ—¥åˆ†ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿

### ç’°å¢ƒå¤‰æ•°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```bash
# AWS S3ã‚¢ã‚¯ã‚»ã‚¹ç”¨ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰
export AWS_ACCESS_KEY_ID=your_key
export AWS_SECRET_ACCESS_KEY=your_secret
```

## ğŸ“ˆ ä½¿ã„æ–¹

### åŸºæœ¬çš„ãªæµã‚Œ

1. **ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**ã§å…¨ä½“åƒã‚’æŠŠæ¡
2. **ç”Ÿç”£æ€§åˆ†æ**ã§è©³ç´°ãªãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ç¢ºèª
3. **å¥åº·ç›¸é–¢**ã§ç¡çœ ã¨ç”Ÿç”£æ€§ã®é–¢ä¿‚ã‚’åˆ†æ
4. **ãƒ‡ãƒ¼ã‚¿æ¢ç´¢**ã§è‡ªç”±ã«SQLã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œ

### SQLã‚¯ã‚¨ãƒªä¾‹

```sql
-- éå»30æ—¥ã®å¹³å‡ç”Ÿç”£æ€§
SELECT 
  AVG(productivity_score) as avg_productivity,
  AVG(health_score) as avg_health
FROM mart_productivity_daily
WHERE date >= CURRENT_DATE - INTERVAL '30 days';

-- æ›œæ—¥åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
SELECT 
  EXTRACT(DOW FROM date) as day_of_week,
  AVG(productivity_score) as avg_score
FROM mart_productivity_daily
GROUP BY day_of_week
ORDER BY day_of_week;
```

## ğŸ¨ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ãƒ†ãƒ¼ãƒå¤‰æ›´
`.streamlit/config.toml`ã‚’ç·¨é›†ï¼š
```toml
[theme]
primaryColor = "#FF6B6B"
backgroundColor = "#0E1117"
```

### ãƒšãƒ¼ã‚¸è¿½åŠ 
`pages/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ–°ã—ã„Pythonãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ï¼š
```python
# pages/4_ğŸ¯_Custom.py
import streamlit as st
st.title("ã‚«ã‚¹ã‚¿ãƒ ãƒšãƒ¼ã‚¸")
```

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤

### Streamlit Cloudï¼ˆç„¡æ–™ï¼‰

1. GitHubã«ãƒ—ãƒƒã‚·ãƒ¥
2. [share.streamlit.io](https://share.streamlit.io)ã§ãƒ‡ãƒ—ãƒ­ã‚¤
3. `analytics/app.py`ã‚’æŒ‡å®š

### ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œ

```bash
streamlit run app.py --server.port 8501
```

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„**
   ```bash
   pip install -r requirements.txt
   ```

2. **DBãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„**
   - ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™
   - ã¾ãŸã¯dbtã‚’å®Ÿè¡Œã—ã¦DBãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ

3. **ãƒãƒ¼ãƒˆç«¶åˆ**
   ```bash
   streamlit run app.py --server.port 8502
   ```

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Phase 3 ä»•æ§˜æ›¸](../docs/data-pipeline/phase-3-analytics-foundation.md)
- [ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰](../docs/data-pipeline/testing-guide.md)
- [Streamlitå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.streamlit.io)