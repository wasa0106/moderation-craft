version: 2

models:
  - name: stg_fitbit_sleep_json
    description: "Fitbit睡眠データのステージング層"
    columns:
      - name: id
        description: "ユーザーと日付の組み合わせによる一意識別子"
        tests:
          - unique
          - not_null
      - name: user_id
        description: "ユーザーID"
        tests:
          - not_null
      - name: sleep_date
        description: "睡眠日"
        tests:
          - not_null
      - name: total_sleep_minutes
        description: "総睡眠時間（分）"
      - name: sleep_efficiency
        description: "睡眠効率（%）"
        tests:
          - not_null
      - name: deep_sleep_minutes
        description: "深い睡眠の時間（分）"
      - name: light_sleep_minutes
        description: "浅い睡眠の時間（分）"
      - name: rem_sleep_minutes
        description: "REM睡眠の時間（分）"
      - name: sleep_quality_category
        description: "睡眠の質カテゴリ（good/fair/poor）"
        tests:
          - accepted_values:
              values: ['good', 'fair', 'poor']

  - name: stg_fitbit_activity_json
    description: "Fitbit活動データのステージング層"
    columns:
      - name: id
        description: "ユーザーと日付の組み合わせによる一意識別子"
        tests:
          - unique
          - not_null
      - name: user_id
        description: "ユーザーID"
        tests:
          - not_null
      - name: activity_date
        description: "活動日"
        tests:
          - not_null
      - name: steps
        description: "歩数"
      - name: distance_km
        description: "移動距離（km）"
      - name: calories_burned
        description: "消費カロリー"
      - name: active_minutes
        description: "アクティブな時間（分）"

  - name: stg_work_sessions
    description: "作業セッションデータのステージング層"
    columns:
      - name: session_id
        description: "セッションID"
        tests:
          - unique
          - not_null
      - name: user_id
        description: "ユーザーID"
        tests:
          - not_null
      - name: session_date
        description: "セッション日"
        tests:
          - not_null
      - name: duration_minutes
        description: "セッション時間（分）"
        tests:
          - not_null
      - name: time_slot
        description: "時間帯カテゴリ"
        tests:
          - accepted_values:
              values: ['early_morning', 'morning', 'late_morning', 'afternoon', 'late_afternoon', 'evening', 'night']